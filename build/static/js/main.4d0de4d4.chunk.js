(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{42:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(17),o=n.n(c),s=n(3),a=n(0),i=function(e){var t=e.searchTerm,n=e.setSearchTerm;return Object(a.jsxs)("div",{children:["filter shown with: ",Object(a.jsx)("input",{value:t,onChange:function(e){n(e.target.value)}})]})},u=n(18),d=n(8),l=n(5),b=n.n(l),j="api/persons",f={getAll:function(){return b.a.get(j).then((function(e){return e.data}))},create:function(e){return b.a.post(j,e).then((function(e){return e.data}))},deletePerson:function(e){return b.a.delete("".concat(j,"/").concat(e))},updatePerson:function(e){return b.a.put("".concat(j,"/").concat(e.id),e).then((function(e){return e.data}))}},m=function(e){var t=e.newName,n=e.newNumber,r=e.setName,c=e.setNumber,o=e.persons,s=e.setPersons,i=e.setNotification;return Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault();var r=o.find((function(e){return e.name===t}));r?function(){window.confirm("".concat(t," is already added to phonebook. Replace the old number with a new one?"));var e=Object(d.a)(Object(d.a)({},r),{},{number:n});f.updatePerson(e).then((function(t){i("Updated ".concat(e.name),"success"),setTimeout((function(){i(null)}),5e3),s(o.map((function(n){return n.id!==e.id?n:t})))}),(function(){i("Information of ".concat(e.name," has already been removed from the server"),"error"),setTimeout((function(){i(null)}),5e3)}))}():function(){var e={id:Math.max.apply(Math,Object(u.a)(o.map((function(e){return e.id}))))+1,name:t,number:n};f.create(e).then((function(t){i("Added ".concat(e.name),"success"),setTimeout((function(){i(null)}),5e3),s(o.concat(t))}))}()},children:[Object(a.jsxs)("div",{children:["name: ",Object(a.jsx)("input",{value:t,onChange:function(e){r(e.target.value)}})]}),Object(a.jsxs)("div",{children:["number: ",Object(a.jsx)("input",{value:n,onChange:function(e){c(e.target.value)}})]}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"submit",children:"add"})})]})},h=function(e){var t=e.person,n=e.deletePerson;return Object(a.jsx)("div",{children:Object(a.jsxs)("li",{children:[t.name,": ",t.number," ",Object(a.jsx)("button",{onClick:function(){return n(t)},children:"Delete"})]})})},p=function(e){var t=e.persons,n=e.searchTerm,r=e.setPersons,c=e.setNotification,o=function(e){window.confirm("Delete ".concat(e.name,"?")),f.deletePerson(e.id).catch((function(){c("Information of ".concat(e.name," has already been from server"),"error"),setTimeout((function(){c(null)}),5e3),r(t.filter((function(t){return t.id!==e.id})))}))};return t.map((function(e){return e.name.toUpperCase().includes(n.toUpperCase())?Object(a.jsx)("div",{children:Object(a.jsx)(h,{person:e,setPersons:r,deletePerson:o})},e.id):""}))},O=function(e){var t=e.message,n=e.type;return t?Object(a.jsx)("div",{style:"success"===n?{color:"green",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"}:{color:"red",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"},children:t}):null},x=function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(""),u=Object(s.a)(o,2),d=u[0],l=u[1],b=Object(r.useState)(""),j=Object(s.a)(b,2),h=j[0],x=j[1],v=Object(r.useState)(""),g=Object(s.a)(v,2),w=g[0],N=g[1],S=Object(r.useState)(null,"success"),y=Object(s.a)(S,2),P=y[0],k=y[1];return Object(r.useEffect)((function(){f.getAll().then((function(e){return c(e)}))}),[]),Object(a.jsxs)("div",{children:[Object(a.jsx)(O,{message:P}),Object(a.jsx)("h2",{children:"Phonebook"}),Object(a.jsx)(i,{filterString:w,setSearchTerm:N}),Object(a.jsx)(m,{newName:d,setName:l,newNumber:h,setNumber:x,persons:n,setPersons:c,setNotification:k}),Object(a.jsx)("h2",{children:"Numbers"}),Object(a.jsx)(p,{persons:n,searchTerm:w,setPersons:c,setNotification:k})]})};o.a.render(Object(a.jsx)(x,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.4d0de4d4.chunk.js.map